<script type="text/javascript">
    RED.nodes.registerType('rainbird-active', {
        category: 'rainbird',
        color: '#E6E0F8',
        defaults: {
            name: { value: "" },
            server: { value: "", type: "rainbird-server" },
            mode: { value: "raw", required: true }
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-tint",
        label: function () {
            return this.name || "rainbird-active";
        }
    });
</script>

<script type="text/html" data-template-name="rainbird-active">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="rainbird-active">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server" placeholder="Select Rainbird server">
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-cog"></i> Mode</label>
        <select id="node-input-mode">
            <option value="raw">Raw</option>
            <option value="homekit">HomeKit</option>
        </select>
    </div>
</script>

<script type="text/html" data-help-name="rainbird-active">
    <p>This node queries the currently active sprinkler zones from a Rainbird controller (LNK2) via local network.</p>
    <p><strong>Mode:</strong></p>
    <ul>
        <li><code>raw</code> – returns all available fields from the controller (internal format).</li>
        <li><code>homekit</code> – returns output suitable for HomeKit integration based on NRCHKB.</li>
    </ul>
    <p>Requires a configured <code>rainbird-server</code> node with IP and encryption key.</p>
</script>
